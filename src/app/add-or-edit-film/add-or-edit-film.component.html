<div class="container">
  <div class="card">
    <button class="go-back" [routerLink]="edit ? '/films/' + filmForm.controls.id.value : '/'" type="button">
      <img src="assets/arrow_back.svg" /> Retour
    </button>

    <h1 class="text-center">{{ edit ? 'Modifier un film' : 'Ajouter un film' }}</h1>

    <form [formGroup]="filmForm" (ngSubmit)="submit()">

      <div class="column">
        <div class="row">
          <div>
            <div class="label">Titre</div>
            <input type="text" formControlName="title" />
            <div class="error" *ngIf="haveSubmitOnce && filmForm.controls.title.status == 'INVALID'">
              Ce champ est obligatoire
            </div>
          </div>

          <div>
            <div class="label">Date de sortie</div>
            <input type="date" formControlName="releaseDate" />
            <div class="error" *ngIf="haveSubmitOnce && filmForm.controls.releaseDate.status == 'INVALID'">
              Ce champ est obligatoire
            </div>
          </div>
        </div>

        <div>
          <div class="label">Note</div>
          <app-edit-rating [rating]="filmForm.controls.rating.value" (onUpdate)="updateRating($event)"></app-edit-rating>
        </div>

        <div>
          <div class="label">Synopsis</div>
          <textarea rows="8" formControlName="synopsis" ></textarea>
        </div>
      </div>

      <button class="submit" type="submit">{{ edit ? 'Modifier' : 'Ajouter' }}</button>

    </form>
  </div>
</div>
